<head>
  <title>replaypoker realtime statistics</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
</head>

<body>
  <div class="header">
    <input id="players" type="button" value="Players" />
    <span>Hi Replay Poker! I'm happy  you take a look to my <a href="http://fr.linkedin.com/in/flecroart/" target="_blank">resume</a>. Here is a realtime updated statistics ladder. (<a href="https://github.com/peernohell/replaypoker" target="_blank">source code</a>)</span>
  </div>
  <div id="main">
    {{> main}}
  </div>
</body>

<template name="main">
  {{> UI.dynamic template=view data=viewData}}
</template>

<template name="tables">
  <h1>tables : {{nbTables}}</h1>
  {{#each tables}}
    {{> table}}
  {{/each}}
</template>

<template name="table">
  <div class='table'>
    <h1>{{name}} ({{nbPlayers}} / {{tableSeats}})</h1>
     <a href="http://www.replaypoker.com{{url}}" target="_blank">see</a>
    <div>type: {{type}}</div>
    <div>state: {{state}}</div>
    <div>players: </div>
    {{#each seats}}
      <div>{{username}} ({{id}})</div>
    {{/each}}
    <div>
      histories: {{histories.length}}
    {{#each histories}}
      <div>date: {{date}}</div>
      <div>playersIds: {{playersIds}}</div>
      <div>seats: {{seats.length}}</div>
    {{/each}}
    </div>
  </div>
</template>

<template name="users">
<div class="users">
  {{#each users}}
    {{> user}}
  {{/each}}
</div>
</template>

<template name="userTableHistories">
<div>table: {{tableName}} <span class="left">win: {{{ chip winChips}}}</span></div>
  {{{chart this}}}
</template>

<template name="userDetail">
<div class="layoutDetail">
  <div class="leftPanel">
    {{> user}}
  </div>
  <div class="mainPanel">
    {{> userHistories}}
  </div>
</div>
</template>

<template name="user">
  <div class='user'>
    <img class="avatar"  src="{{userAvatar}}">
    <h2> {{username}} <a class="fa fa-external-link" href="http://www.replaypoker.com{{url}}" target="_blank"></a></h2>
    <div>Country: <img src="{{flag}}" ></div>
    <div>average: {{{chip avgChips}}}</div>
    <div>won: {{{chip winChips}}}</div>
  </div>
</template>

<template name="userHistories">
  <div class="histories">
    {{ UI.contentBlock}}
    {{#each histories}}
      <div class="tableHistory">
      {{> userTableHistories}}
      </div>
    {{/each}}
  </div>
</template>
